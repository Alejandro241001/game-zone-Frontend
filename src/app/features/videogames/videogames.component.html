<div class="container my-5">

  <div class="d-flex justify-content-between align-items-center mb-4">
    <h1 class="mb-0">üéÆ VIDEOJUEGOS</h1>

    <!-- üîπ Bot√≥n visible solo para MANAGER -->
    <button
      *ngIf="isManager"
      class="btn btn-primary"
      [routerLink]="['/videogames/new']"
    >
      ‚ûï A√±adir videojuego
    </button>
  </div>

  <hr class="gamezone-divider" />

  <div *ngIf="error" class="alert alert-warning text-center">
    {{ error }}
  </div>

  <div *ngIf="!videogames || videogames.length === 0" class="alert alert-info mt-5 text-center">
    No hay videojuegos disponibles.
  </div>

  <!-- ========================= -->
  <!-- üéØ FILTROS -->
  <!-- ========================= -->
  <div class="card p-3 mb-4 shadow-sm">
    <h5 class="mb-3">üîç Filtrar videojuegos</h5>

    <div class="row g-3">

      <!-- Filtro por GENEROS -->
      <div class="col-md-6">
        <label><strong>G√©neros:</strong></label>
        <select
          class="form-select"
          [(ngModel)]="selectedGenre"
          (change)="applyFilters()"
        >
          <option [ngValue]="null">Todos</option>
          <option *ngFor="let g of allGenres" [ngValue]="g">{{ g.name }}</option>
        </select>
      </div>

      <!-- Filtro por PLATAFORMAS -->
      <div class="col-md-6">
        <label><strong>Plataformas:</strong></label>
        <select
          class="form-select"
          [(ngModel)]="selectedPlatform"
          (change)="applyFilters()"
        >
          <option [ngValue]="null">Todas</option>
          <option *ngFor="let p of allPlatforms" [ngValue]="p">{{ p.name }}</option>
        </select>
      </div>

    </div>
  </div>

  <!-- ========================= -->
  <!-- üéÆ LISTADO DE VIDEOJUEGOS -->
  <!-- ========================= -->
  <div class="games-grid mt-4">
    <div
      class="game-card"
      *ngFor="let videogame of filteredVideogames"
      (click)="goToDetail(videogame.id)"
    >
      <img
        [src]="'http://localhost:8080/img/' + videogame.img"
        [alt]="videogame.name"
        (error)="onImageError($event)"
      />
    </div>
  </div>

</div>
